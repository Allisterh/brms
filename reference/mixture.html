<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Finite Mixture Families in <span class="pkg">brms</span> — mixture • brms</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Finite Mixture Families in <span class="pkg">brms</span> — mixture" />

<meta property="og:description" content="Set up a finite mixture family for use in brms." />

<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />


<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">brms</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">2.3.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Other Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="http://mc-stan.org/rstan">rstan</a>
    </li>
    <li>
      <a href="http://mc-stan.org/rstanarm">rstanarm</a>
    </li>
    <li>
      <a href="http://mc-stan.org/bayesplot">bayesplot</a>
    </li>
    <li>
      <a href="http://mc-stan.org/shinystan">shinystan</a>
    </li>
    <li>
      <a href="http://mc-stan.org/loo">loo</a>
    </li>
    <li>
      <a href="http://mc-stan.org/projpred">projpred</a>
    </li>
    <li>
      <a href="http://mc-stan.org/rstantools">rstantools</a>
    </li>
  </ul>
</li>
<li>
  <a href="http://mc-stan.org">Stan</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/mcmc_stan">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/stan-dev/brms">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="http://discourse.mc-stan.org/">
    <span class="fa fa-users"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Finite Mixture Families in <span class="pkg">brms</span></h1>
    <small class="dont-index">Source: <a href='https://github.com/paul-buerkner/brms/blob/master/R/families.R'><code>R/families.R</code></a></small>
    <div class="hidden name"><code>mixture.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Set up a finite mixture family for use in <span class="pkg">brms</span>.</p>
    
    </div>

    <pre class="usage"><span class='fu'>mixture</span>(<span class='no'>...</span>, <span class='kw'>flist</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>nmix</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>order</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>...</th>
      <td><p>One or more objects providing a description of the 
response distributions to be combined in the mixture model. 
These can be family functions, calls to family functions or 
character strings naming the families. For details of supported 
families see <code><a href='brmsfamily.html'>brmsfamily</a></code>.</p></td>
    </tr>
    <tr>
      <th>flist</th>
      <td><p>Optional list of objects, which are treated in the 
same way as objects passed via the <code>...</code> argument.</p></td>
    </tr>
    <tr>
      <th>nmix</th>
      <td><p>Optional numeric vector specifying the number of times
each family is repeated. If specified, it must have the same length 
as the number of families passed via <code>...</code> or <code>flist</code>.</p></td>
    </tr>
    <tr>
      <th>order</th>
      <td><p>Ordering constraint to identify mixture components.
If <code>'mu'</code> or <code>TRUE</code>, population-level intercepts
of the mean parameters are ordered. 
If <code>'none'</code> or <code>FALSE</code>, no ordering constraint is applied.
If <code>NULL</code> (the default), <code>order</code> is set to <code>'mu'</code>
if all families are the same and <code>'none'</code> otherwise.
Other ordering constraints may be implemented in the future.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of class <code>mixfamily</code>.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Most families supported by <span class="pkg">brms</span> can be used to form 
mixtures. The response variable has to be valid for all components
of the mixture family. Currently, the number of mixture components 
has to be specified by the user. It is not yet possible to estimate 
the number of mixture components from the data.</p>
<p>For most mixture models, you may want to specify priors on the population-level
intercepts via <code><a href='set_prior.html'>set_prior</a></code> to improve convergence. 
In addition, it is sometimes necessary to set <code>inits = 0</code> in the call to 
<code><a href='brm.html'>brm</a></code> to allow chains to initialize properly.</p>
<p>For more details on the specification of mixture
models, see <code><a href='brmsformula.html'>brmsformula</a></code>.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># NOT RUN {</span>
<span class='co'>## simulate some data</span>
<span class='fu'>set.seed</span>(<span class='fl'>1234</span>)
<span class='no'>dat</span> <span class='kw'>&lt;-</span> <span class='fu'>data.frame</span>(
  <span class='kw'>y</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fu'>rnorm</span>(<span class='fl'>200</span>), <span class='fu'>rnorm</span>(<span class='fl'>100</span>, <span class='fl'>6</span>)),
  <span class='kw'>x</span> <span class='kw'>=</span> <span class='fu'>rnorm</span>(<span class='fl'>300</span>),
  <span class='kw'>z</span> <span class='kw'>=</span> <span class='fu'>sample</span>(<span class='fl'>0</span>:<span class='fl'>1</span>, <span class='fl'>300</span>, <span class='fl'>TRUE</span>)
)

<span class='co'>## fit a simple normal mixture model</span>
<span class='no'>mix</span> <span class='kw'>&lt;-</span> <span class='fu'>mixture</span>(<span class='no'>gaussian</span>, <span class='no'>gaussian</span>)
<span class='no'>prior</span> <span class='kw'>&lt;-</span> <span class='fu'>c</span>(
  <span class='fu'><a href='set_prior.html'>prior</a></span>(<span class='fu'>normal</span>(<span class='fl'>0</span>, <span class='fl'>7</span>), <span class='no'>Intercept</span>, <span class='kw'>dpar</span> <span class='kw'>=</span> <span class='no'>mu1</span>),
  <span class='fu'><a href='set_prior.html'>prior</a></span>(<span class='fu'>normal</span>(<span class='fl'>5</span>, <span class='fl'>7</span>), <span class='no'>Intercept</span>, <span class='kw'>dpar</span> <span class='kw'>=</span> <span class='no'>mu2</span>)
)
<span class='no'>fit1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='brm.html'>brm</a></span>(<span class='fu'><a href='brmsformula.html'>bf</a></span>(<span class='no'>y</span> ~ <span class='no'>x</span> + <span class='no'>z</span>), <span class='no'>dat</span>, <span class='kw'>family</span> <span class='kw'>=</span> <span class='no'>mix</span>,
            <span class='kw'>prior</span> <span class='kw'>=</span> <span class='no'>prior</span>, <span class='kw'>chains</span> <span class='kw'>=</span> <span class='fl'>2</span>)
<span class='fu'>summary</span>(<span class='no'>fit1</span>)
<span class='fu'><a href='pp_check.brmsfit.html'>pp_check</a></span>(<span class='no'>fit1</span>)

<span class='co'>## use different predictors for the components</span>
<span class='no'>fit2</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='brm.html'>brm</a></span>(<span class='fu'><a href='brmsformula.html'>bf</a></span>(<span class='no'>y</span> ~ <span class='fl'>1</span>, <span class='no'>mu1</span> ~ <span class='no'>x</span>, <span class='no'>mu2</span> ~ <span class='no'>z</span>), <span class='no'>dat</span>, <span class='kw'>family</span> <span class='kw'>=</span> <span class='no'>mix</span>,
            <span class='kw'>prior</span> <span class='kw'>=</span> <span class='no'>prior</span>, <span class='kw'>chains</span> <span class='kw'>=</span> <span class='fl'>2</span>)
<span class='fu'>summary</span>(<span class='no'>fit2</span>)

<span class='co'>## fix the mixing proportions</span>
<span class='no'>fit3</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='brm.html'>brm</a></span>(<span class='fu'><a href='brmsformula.html'>bf</a></span>(<span class='no'>y</span> ~ <span class='no'>x</span> + <span class='no'>z</span>, <span class='kw'>theta1</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>theta2</span> <span class='kw'>=</span> <span class='fl'>2</span>),
            <span class='no'>dat</span>, <span class='kw'>family</span> <span class='kw'>=</span> <span class='no'>mix</span>, <span class='kw'>prior</span> <span class='kw'>=</span> <span class='no'>prior</span>,
            <span class='kw'>inits</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>chains</span> <span class='kw'>=</span> <span class='fl'>2</span>)
<span class='fu'>summary</span>(<span class='no'>fit3</span>)
<span class='fu'><a href='pp_check.brmsfit.html'>pp_check</a></span>(<span class='no'>fit3</span>)

<span class='co'>## predict the mixing proportions</span>
<span class='no'>fit4</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='brm.html'>brm</a></span>(<span class='fu'><a href='brmsformula.html'>bf</a></span>(<span class='no'>y</span> ~ <span class='no'>x</span> + <span class='no'>z</span>, <span class='no'>theta2</span> ~ <span class='no'>x</span>),
            <span class='no'>dat</span>, <span class='kw'>family</span> <span class='kw'>=</span> <span class='no'>mix</span>, <span class='kw'>prior</span> <span class='kw'>=</span> <span class='no'>prior</span>,
            <span class='kw'>inits</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>chains</span> <span class='kw'>=</span> <span class='fl'>2</span>)
<span class='fu'>summary</span>(<span class='no'>fit4</span>)
<span class='fu'><a href='pp_check.brmsfit.html'>pp_check</a></span>(<span class='no'>fit4</span>)

<span class='co'>## compare model fit</span>
<span class='fu'><a href='loo.brmsfit.html'>LOO</a></span>(<span class='no'>fit1</span>, <span class='no'>fit2</span>, <span class='no'>fit3</span>, <span class='no'>fit4</span>)
<span class='co'># }</span><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Paul-Christian Bürkner.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

