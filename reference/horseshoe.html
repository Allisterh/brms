<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Regularized horseshoe priors in <span class="pkg">brms</span> — horseshoe • brms</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Regularized horseshoe priors in <span class="pkg">brms</span> — horseshoe" />
<meta property="og:description" content="Function used to set up regularized horseshoe priors and related
hierarchical shrinkage priors for population-level effects in brms. The
function does not evaluate its arguments -- it exists purely to help set up
the model." />
<meta property="og:image" content="/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">brms</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.13.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Other Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="http://mc-stan.org/rstan">rstan</a>
    </li>
    <li>
      <a href="http://mc-stan.org/rstanarm">rstanarm</a>
    </li>
    <li>
      <a href="http://mc-stan.org/bayesplot">bayesplot</a>
    </li>
    <li>
      <a href="http://mc-stan.org/shinystan">shinystan</a>
    </li>
    <li>
      <a href="http://mc-stan.org/loo">loo</a>
    </li>
    <li>
      <a href="http://mc-stan.org/projpred">projpred</a>
    </li>
    <li>
      <a href="http://mc-stan.org/rstantools">rstantools</a>
    </li>
  </ul>
</li>
<li>
  <a href="http://mc-stan.org">Stan</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/mcmc_stan">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/stan-dev/brms">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="http://discourse.mc-stan.org/">
    <span class="fa fa-users"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Regularized horseshoe priors in <span class="pkg">brms</span></h1>
    <small class="dont-index">Source: <a href='https://github.com/paul-buerkner/brms/blob/master/R/priors.R'><code>R/priors.R</code></a></small>
    <div class="hidden name"><code>horseshoe.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Function used to set up regularized horseshoe priors and related
hierarchical shrinkage priors for population-level effects in <span class="pkg">brms</span>. The
function does not evaluate its arguments -- it exists purely to help set up
the model.</p>
    </div>

    <pre class="usage"><span class='fu'>horseshoe</span>(
  <span class='kw'>df</span> <span class='kw'>=</span> <span class='fl'>1</span>,
  <span class='kw'>scale_global</span> <span class='kw'>=</span> <span class='fl'>1</span>,
  <span class='kw'>df_global</span> <span class='kw'>=</span> <span class='fl'>1</span>,
  <span class='kw'>scale_slab</span> <span class='kw'>=</span> <span class='fl'>2</span>,
  <span class='kw'>df_slab</span> <span class='kw'>=</span> <span class='fl'>4</span>,
  <span class='kw'>par_ratio</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>autoscale</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>df</th>
      <td><p>Degrees of freedom of student-t prior of the 
local shrinkage parameters. Defaults to <code>1</code>.</p></td>
    </tr>
    <tr>
      <th>scale_global</th>
      <td><p>Scale of the student-t prior of the global shrinkage 
parameter. Defaults to <code>1</code>. 
In linear models, <code>scale_global</code> will internally be 
multiplied by the residual standard deviation parameter <code>sigma</code>.</p></td>
    </tr>
    <tr>
      <th>df_global</th>
      <td><p>Degrees of freedom of student-t prior of the 
global shrinkage parameter. Defaults to <code>1</code>. If <code>df_global</code>
is greater <code>1</code>, the shape of the prior will no longer resemble
a horseshoe and it may be more appropriately called an hierarchical
shrinkage prior in this case.</p></td>
    </tr>
    <tr>
      <th>scale_slab</th>
      <td><p>Scale of the student-t prior of the regularization
parameter. Defaults to <code>2</code>. The original unregularized horseshoe 
prior is obtained by setting <code>scale_slab</code> to infinite, which
we can approximate in practice by setting it to a very large real value.</p></td>
    </tr>
    <tr>
      <th>df_slab</th>
      <td><p>Degrees of freedom of the student-t prior of 
the regularization parameter. Defaults to <code>4</code>.</p></td>
    </tr>
    <tr>
      <th>par_ratio</th>
      <td><p>Ratio of the expected number of non-zero coefficients 
to the expected number of zero coefficients. If specified,
<code>scale_global</code> is ignored and internally computed as
<code>par_ratio / sqrt(N)</code>, where <code>N</code> is the total number 
of observations in the data.</p></td>
    </tr>
    <tr>
      <th>autoscale</th>
      <td><p>Logical; indicating whether the horseshoe
prior should be scaled using the residual standard deviation
<code>sigma</code> if possible and sensible (defaults to <code>TRUE</code>).
Autoscaling is not applied for distributional parameters or 
when the model does not contain the parameter <code>sigma</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A character string obtained by <code><a href='https://rdrr.io/r/base/match.call.html'>match.call()</a></code> with
  additional arguments.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The horseshoe prior is a special shrinkage prior initially proposed by
  Carvalho et al. (2009).
  It is symmetric around zero with fat tails and an infinitely large spike
  at zero. This makes it ideal for sparse models that have 
  many regression coefficients, although only a minority of them is non-zero. 
  The horseshoe prior can be applied on all population-level effects at once 
  (excluding the intercept) by using <code><a href='set_prior.html'>set_prior("horseshoe(1)")</a></code>.
  The <code>1</code> implies that the student-t prior of the local shrinkage 
  parameters has 1 degrees of freedom. This may, however, lead to an 
  increased number of divergent transition in <span class="pkg">Stan</span>.
  Accordingly, increasing the degrees of freedom to slightly higher values 
  (e.g., <code>3</code>) may often be a better option, although the prior 
  no longer resembles a horseshoe in this case. 
  Further, the scale of the global shrinkage parameter plays an important role
  in amount of shrinkage applied. It defaults to <code>1</code>,
  but this may result in too few shrinkage (Piironen &amp; Vehtari, 2016).
  It is thus possible to change the scale using argument <code>scale_global</code>
  of the horseshoe prior, for instance <code>horseshoe(1, scale_global = 0.5)</code>.
  In linear models, <code>scale_global</code> will internally be multiplied by the 
  residual standard deviation parameter <code>sigma</code>. See Piironen and 
  Vehtari (2016) for recommendations how to properly set the global scale.
  The degrees of freedom of the global shrinkage prior may also be 
  adjusted via argument <code>df_global</code>. 
  Piironen and Vehtari (2017) recommend to specifying the ratio of the 
  expected number of non-zero coefficients to the expected number of zero 
  coefficients <code>par_ratio</code> rather than <code>scale_global</code> directly.
  As proposed by Piironen and Vehtari (2017), an additional regularization 
  is applied that only affects non-zero coefficients. The amount of
  regularization can be controlled via <code>scale_slab</code> and <code>df_slab</code>.
  To make sure that shrinkage can equally affect all coefficients, 
  predictors should be one the same scale. 
  Generally, models with horseshoe priors a more likely than other models
  to have divergent transitions so that increasing <code>adapt_delta</code> 
  from <code>0.8</code> to values closer to <code>1</code> will often be necessary.
  See the documentation of <code><a href='brm.html'>brm</a></code> for instructions
  on how to increase <code>adapt_delta</code>.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Carvalho, C. M., Polson, N. G., &amp; Scott, J. G. (2009). 
  Handling sparsity via the horseshoe. 
  In International Conference on Artificial Intelligence and Statistics (pp. 73-80).</p>   
<p>Piironen J. &amp; Vehtari A. (2016). On the Hyperprior Choice for the Global 
   Shrinkage Parameter in the Horseshoe Prior. 
   <a href='https://arxiv.org/pdf/1610.05559v1.pdf'>https://arxiv.org/pdf/1610.05559v1.pdf</a></p>   
<p>Piironen, J., and Vehtari, A. (2017). Sparsity information and regularization
   in the horseshoe and other shrinkage priors. 
   <a href='https://arxiv.org/abs/1707.01694'>https://arxiv.org/abs/1707.01694</a></p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='set_prior.html'>set_prior</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='set_prior.html'>set_prior</a></span>(<span class='fu'>horseshoe</span>(<span class='kw'>df</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>par_ratio</span> <span class='kw'>=</span> <span class='fl'>0.1</span>))</div><div class='output co'>#&gt; b ~ horseshoe(df = 3, par_ratio = 0.1)</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Paul-Christian Bürkner.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


