<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Linear and Non-linear formulas in <span class="pkg">brms</span> — brmsformula-helpers • brms</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Linear and Non-linear formulas in <span class="pkg">brms</span> — brmsformula-helpers" />

<meta property="og:description" content="Helper functions to specify linear and non-linear
formulas for use with brmsformula." />

<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">brms</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.10.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Other Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="http://mc-stan.org/rstan">rstan</a>
    </li>
    <li>
      <a href="http://mc-stan.org/rstanarm">rstanarm</a>
    </li>
    <li>
      <a href="http://mc-stan.org/bayesplot">bayesplot</a>
    </li>
    <li>
      <a href="http://mc-stan.org/shinystan">shinystan</a>
    </li>
    <li>
      <a href="http://mc-stan.org/loo">loo</a>
    </li>
    <li>
      <a href="http://mc-stan.org/projpred">projpred</a>
    </li>
    <li>
      <a href="http://mc-stan.org/rstantools">rstantools</a>
    </li>
  </ul>
</li>
<li>
  <a href="http://mc-stan.org">Stan</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/mcmc_stan">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/stan-dev/brms">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="http://discourse.mc-stan.org/">
    <span class="fa fa-users"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Linear and Non-linear formulas in <span class="pkg">brms</span></h1>
    <small class="dont-index">Source: <a href='https://github.com/paul-buerkner/brms/blob/master/R/brmsformula.R'><code>R/brmsformula.R</code></a></small>
    <div class="hidden name"><code>brmsformula-helpers.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Helper functions to specify linear and non-linear
formulas for use with <code><a href='brmsformula.html'>brmsformula</a></code>.</p>
    
    </div>

    <pre class="usage"><span class='fu'>nlf</span>(<span class='no'>formula</span>, <span class='no'>...</span>, <span class='kw'>flist</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>dpar</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>resp</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>loop</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)

<span class='fu'>lf</span>(<span class='no'>...</span>, <span class='kw'>flist</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>dpar</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>resp</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>center</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>cmc</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>sparse</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>decomp</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)

<span class='fu'>set_nl</span>(<span class='kw'>nl</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>dpar</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>resp</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)

<span class='fu'>set_rescor</span>(<span class='kw'>rescor</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>set_mecor</span>(<span class='kw'>mecor</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>formula</th>
      <td><p>Non-linear formula for a distributional parameter.
The name of the distributional parameter can either be specified
on the left-hand side of <code>formula</code> or via argument <code>dpar</code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Additional <code>formula</code> objects to specify 
predictors of non-linear and distributional parameters. 
Formulas can either be named directly or contain
names on their left-hand side. 
The following are distributional parameters of specific families
(all other parameters are treated as non-linear parameters):
<code>sigma</code> (residual standard deviation or scale of
the <code>gaussian</code>, <code>student</code>, <code>skew_normal</code>, 
<code>lognormal</code> <code>exgaussian</code>, and <code>asym_laplace</code> families);
<code>shape</code> (shape parameter of the <code>Gamma</code>,
<code>weibull</code>, <code>negbinomial</code>, and related
zero-inflated / hurdle families); <code>nu</code> (degrees of freedom 
parameter of the <code>student</code> and <code>frechet</code> families);
<code>phi</code> (precision parameter of the <code>beta</code> 
and <code>zero_inflated_beta</code> families);
<code>kappa</code> (precision parameter of the <code>von_mises</code> family);
<code>beta</code> (mean parameter of the exponential component
of the <code>exgaussian</code> family);
<code>quantile</code> (quantile parameter of the <code>asym_laplace</code> family);
<code>zi</code> (zero-inflation probability); 
<code>hu</code> (hurdle probability);
<code>zoi</code> (zero-one-inflation probability);
<code>coi</code> (conditional one-inflation probability);
<code>disc</code> (discrimination) for ordinal models;
<code>bs</code>, <code>ndt</code>, and <code>bias</code> (boundary separation,
non-decision time, and initial bias of the <code>wiener</code>
diffusion model).
By default, distributional parameters are modeled 
on the log scale if they can be positive only or on the 
logit scale if the can only be within the unit interval.
See 'Details' for more explanation.</p></td>
    </tr>
    <tr>
      <th>flist</th>
      <td><p>Optional list of formulas, which are treated in the 
same way as formulas passed via the <code>...</code> argument.</p></td>
    </tr>
    <tr>
      <th>dpar</th>
      <td><p>Optional character string specifying the distributional 
parameter to which the formulas passed via <code>...</code> and
<code>flist</code> belong.</p></td>
    </tr>
    <tr>
      <th>resp</th>
      <td><p>Optional character string specifying the response 
variable to which the formulas passed via <code>...</code> and
<code>flist</code> belong. Only relevant in multivariate models.</p></td>
    </tr>
    <tr>
      <th>loop</th>
      <td><p>Logical; Only used in non-linear models.
Indicates if the computation of the non-linear formula should be 
done inside (<code>TRUE</code>) or outside (<code>FALSE</code>) a loop
over observations. Defaults to <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>center</th>
      <td><p>Logical; Indicates if the population-level design
matrix should be centered, which usually increases sampling efficiency.
See the 'Details' section for more information.
Defaults to <code>TRUE</code> for distributional parameters
and to <code>FALSE</code> for non-linear parameters.</p></td>
    </tr>
    <tr>
      <th>cmc</th>
      <td><p>Logical; Indicates whether automatic cell-mean coding
should be enabled when removing the intercept by adding <code>0</code> 
to the right-hand of model formulas. Defaults to <code>TRUE</code> to 
mirror the behavior of standard <span style="R">R</span> formula parsing.</p></td>
    </tr>
    <tr>
      <th>sparse</th>
      <td><p>Logical; indicates whether the population-level design matrices
should be treated as sparse (defaults to <code>FALSE</code>). For design matrices
with many zeros, this can considerably reduce required memory. Sampling
speed is currently not improved or even slightly decreased.</p></td>
    </tr>
    <tr>
      <th>decomp</th>
      <td><p>Optional name of the decomposition used for the 
population-level design matrix. Defaults to <code>NULL</code> that is
no decomposition. Other options currently available are
<code>"QR"</code> for the QR decomposition that helps in fitting models
with highly correlated predictors.</p></td>
    </tr>
    <tr>
      <th>nl</th>
      <td><p>Logical; Indicates whether <code>formula</code> should be
treated as specifying a non-linear model. By default, <code>formula</code> 
is treated as an ordinary linear model formula.</p></td>
    </tr>
    <tr>
      <th>rescor</th>
      <td><p>Logical; Indicates if residual correlation between
the response variables should be modeled. Currently this is only
possible in multivariate <code>gaussian</code> and <code>student</code> models.
Only relevant in multivariate models.</p></td>
    </tr>
    <tr>
      <th>mecor</th>
      <td><p>Logical; Indicates if correlations between latent variables
defined by <code><a href='me.html'>me</a></code> terms should be modeled. Defaults to <code>TRUE</code>.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>For <code>lf</code> and <code>nlf</code> a <code>list</code> that can be 
  passed to <code><a href='brmsformula.html'>brmsformula</a></code> or added 
  to an existing <code>brmsformula</code> or <code>mvbrmsformula</code> object. 
  For <code>set_nl</code> and <code>set_rescor</code> a logical value that can be 
  added to an existing <code>brmsformula</code> or <code>mvbrmsformula</code> object.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='brmsformula.html'>brmsformula</a></code>, <code><a href='mvbrmsformula.html'>mvbrmsformula</a></code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># add more formulas to the model</span>
<span class='fu'><a href='brmsformula.html'>bf</a></span>(<span class='no'>y</span> ~ <span class='fl'>1</span>) +
  <span class='fu'>nlf</span>(<span class='no'>sigma</span> ~ <span class='no'>a</span> * <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/Log'>exp</a></span>(<span class='no'>b</span> * <span class='no'>x</span>)) +
  <span class='fu'>lf</span>(<span class='no'>a</span> ~ <span class='no'>x</span>, <span class='no'>b</span> ~ <span class='no'>z</span> + (<span class='fl'>1</span><span class='kw'>|</span><span class='no'>g</span>)) +
  <span class='fu'><a href='https://www.rdocumentation.org/packages/stats/topics/family'>gaussian</a></span>()</div><div class='output co'>#&gt; y ~ 1 
#&gt; sigma ~ a * exp(b * x)
#&gt; a ~ x
#&gt; b ~ z + (1 | g)</div><div class='input'>
<span class='co'># specify 'nl' later on</span>
<span class='fu'><a href='brmsformula.html'>bf</a></span>(<span class='no'>y</span> ~ <span class='no'>a</span> * <span class='fu'>inv_logit</span>(<span class='no'>x</span> * <span class='no'>b</span>)) +
  <span class='fu'>lf</span>(<span class='no'>a</span> + <span class='no'>b</span> ~ <span class='no'>z</span>) +
  <span class='fu'>set_nl</span>(<span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; y ~ a * inv_logit(x * b) 
#&gt; a ~ z
#&gt; b ~ z</div><div class='input'>
<span class='co'># specify a multivariate model</span>
<span class='fu'><a href='brmsformula.html'>bf</a></span>(<span class='no'>y1</span> ~ <span class='no'>x</span> + (<span class='fl'>1</span><span class='kw'>|</span><span class='no'>g</span>)) +
  <span class='fu'><a href='brmsformula.html'>bf</a></span>(<span class='no'>y2</span> ~ <span class='no'>z</span>) +
  <span class='fu'>set_rescor</span>(<span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; y1 ~ x + (1 | g) 
#&gt; y2 ~ z </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Paul-Christian Bürkner.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

